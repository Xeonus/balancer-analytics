# This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

name: Deploy to Firebase Hosting on merge
'on':
  push:
    branches:
      - main
jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    env:
      CI: false
      GENERATE_SOURCEMAP: false
      REACT_APP_WALLETCONNECT_BRIDGE_URL: "https://uniswap.bridge.walletconnect.org"
      REACT_APP_BALANCER_SUBGRAPH_START_TIMESTAMP: 1623004158
      REACT_APP_SUBGRAPH_URL: "https://api.thegraph.com/subgraphs/name/balancer-labs/balancer-v2"
      REACT_APP_SUBGRAPH_ARBITRUM_URL: "https://api.thegraph.com/subgraphs/name/balancer-labs/balancer-arbitrum-v2"
      REACT_APP_SUBGRAPH_POLYGON_URL: "https://api.thegraph.com/subgraphs/name/balancer-labs/balancer-polygon-v2"
      REACT_APP_BLOCKS_SUBGRAPH_URL: "https://api.thegraph.com/subgraphs/name/blocklytics/ethereum-blocks"
      REACT_APP_APP_LINK: "https://balancer.defilytica.com"
      REACT_APP_PROJECT_NAME: "Balancer"
      REACT_APP_SITE_TITLE: "Balancer Analytics"
      REACT_APP_SITE_DESCRIPTION: "Analytics site for the leading automated portfolio manager and trading platform on Ethereum"
      REACT_APP_PRIMARY_COLOR: "#0095E5"
      REACT_APP_SECONDARY_COLOR: "#FF0000"
      REACT_APP_APP_LOGO: "https://github.com/defilytica/aura-analytics/blob/f4484016bfbcb135e8654979a5a9171220970805/src/assets/png/defilytica.png"
      REACT_APP_LOADING_IMAGE: "https://github.com/defilytica/aura-analytics/blob/f4484016bfbcb135e8654979a5a9171220970805/src/assets/png/defilytica.png"
      REACT_APP_BACKGROUND_IMAGE: "https://github.com/defilytica/aura-analytics/blob/f4484016bfbcb135e8654979a5a9171220970805/src/assets/png/defilytica.png"
      REACT_APP_APPLE_TOUCH_192: "https://github.com/defilytica/aura-analytics/blob/f4484016bfbcb135e8654979a5a9171220970805/src/assets/png/defilytica.png"
      REACT_APP_APPLE_TOUCH_512: "https://github.com/defilytica/aura-analytics/blob/f4484016bfbcb135e8654979a5a9171220970805/src/assets/png/defilytica.png"
      REACT_APP_SOCIAL_IMAGE: "https://github.com/defilytica/aura-analytics/blob/f4484016bfbcb135e8654979a5a9171220970805/src/assets/png/defilytica.png"
      REACT_APP_FAVICON: "https://github.com/defilytica/aura-analytics/blob/f4484016bfbcb135e8654979a5a9171220970805/src/assets/png/defilytica.png"
      REACT_APP_MANIFEST: "https://raw.githubusercontent.com/balancer-labs/frontend-v2/develop/public/manifest.json"
      REACT_APP_INFURA_KEY: '${{ secrets.REACT_APP_INFURA_KEY }}'
      REACT_APP_ALCHEMY_KEY: '${{ secrets.REACT_APP_ALCHEMY_KEY }}'
      REACT_APP_ALCHEMY_URL: '${{ secrets.REACT_APP_ALCHEMY_URL }}'
      REACT_APP_ALCHEMY_URL_POLYGON: '${{ secrets.REACT_APP_ALCHEMY_URL_POLYGON }}'
      REACT_APP_ALCHEMY_URL_ZKEVM: '${{ secrets.REACT_APP_ALCHEMY_URL_ZKEVM }}'
      REACT_APP_ALCHEMY_URL_ARBITRUM: '${{ secrets.REACT_APP_ALCHEMY_URL_ARBITRUM }}'
      REACT_APP_CG_KEY: '${{ secrets.REACT_APP_CG_KEY }}'
      REACT_APP_PERSONAL_GRAPH_KEY: '${{ secrets.REACT_APP_PERSONAL_GRAPH_KEY }}'
    strategy:
      matrix:
        node-version: [ 16.x ]
    steps:
      - uses: actions/checkout@v2
      - name: Use Node.js ${{ matrix.node-version }}
        uses: actions/setup-node@v2
        with:
          node-version: ${{ matrix.node-version }}
      - run: yarn install
      - run: yarn build
      - uses: FirebaseExtended/action-hosting-deploy@v0
        with:
          repoToken: '${{ secrets.GITHUB_TOKEN }}'
          firebaseServiceAccount: '${{ secrets.FIREBASE_SERVICE_ACCOUNT_BALANCER_ANALYTICS }}'
          channelId: live
          projectId: balancer-analytics
          firebaseToolsVersion: 12.7.0
